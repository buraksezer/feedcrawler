<div ng-show="feed404 == true" class="feed-404">
    <h3>:'(</h3>
    <h3>Sorry, that page doesn't exist!</h3>
    <h4><a href="/">Go to timeline</a></h4>
</div>
<div ng-show="!loading" class="feed-detail-header">
    <h4>
        <a href="{{ feed_detail.feed.link }}" target="_blank">{{ feed_detail.feed.title }}</a>
        <span ng-show='feed_detail.feed.subs_count == 0' class="subs-count">No subscriber</span>
        <span ng-show='feed_detail.feed.subs_count == 1' class="subs-count">1 subscriber</span>
        <span ng-show='feed_detail.feed.subs_count > 1' class="subs-count">{{ feed_detail.feed.subs_count }} subscribers</span>
        <a ng-click="unsubscribeFeed(feed_detail.feed.id)" ng-show="feed_detail.feed.is_subscribed == true" id="unsubscribe-feed-detail" class="btn btn-danger pull-right">Unsubscribe</a>
        <a ng-click="subscribeFeed(feed_detail.feed.id)" ng-show="feed_detail.feed.is_subscribed == false" id="subscribe-feed-detail" class="btn btn-primary pull-right">Subscribe</a>
    </h4>
    <div class="feed-info">
        <span class="tagline">{{ feed_detail.feed.tagline }}</span><br/>
        <span>Last sync: <i>{{ feed_detail.feed.last_sync }}</i></span>
        <div class="feed-detail-control dropdown pull-right">
            <i class="cursor-pointer dropdown-toggle icon-cog" data-toggle="dropdown"></i>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li role="presentation">
                    <a class="cursor-pointer" role="menuitem" tabindex="-1" data-toggle="modal" data-target="#listControlModal" run-list-control-modal>Add or remove from lists</a>
                </li>
                <li role="presentation">
                    <a role="menuitem" tabindex="-1" href="#">Report abuse</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="divider"></div>
</div>

<div id="new-entry" ng-show="hiddenEntry == true" class="new-entry-counter" catch-new-entry show-hidden-entry>
    <a href="#" ng-show="newEntryCount == 1">{{ newEntryCount }} new entry</a>
    <a href="#" ng-show="newEntryCount > 1">{{ newEntryCount }} new entries</a>
</div>

    <div infinite-scroll='loadFeedDetail()' infinite-scroll-disabled='busy' class="dashboard-entries">
        <div ng-hide="entry.instantEntry == true" ng-mouseenter="myClass='show'" ng-mouseleave="myClass=''" class="dashboard-entry" ng-repeat="entry in feed_detail.entries">
            <ul ng-class="myClass" class="entry-topbar">
                <li>
                    <a ng-show="!entry.inReadLater" data-hint="Read later" class="hint--top read-later" href="#" read-later>
                        <i class="icon-time"></i>
                    </a>
                    <a ng-show="entry.inReadLater" data-hint="Remove from the read later list" class="hint--top read-later" href="#" read-later>
                        <i class="icon-eraser"></i>
                    </a>
                </li>
                <li>
                    <a href="{{ entry.link }}" target="_blank">
                        <i data-toggle="tooltip" title="Original Link" class="icon-share-alt"></i>
                    </a>
                </li>
                <li>
                    <a href="/reader/{{ entry.slug }}" target="_blank">
                        <i data-toggle="tooltip" title="Open new tab" class="icon-share"></i>
                    </a>
                </li>
            </ul>

            <div class="entry-content">
                <a ng-show="entry.available == 1" ng-click="renderToReader(entry.slug)" class="entry-title" href="/reader/{{entry.slug}}" prevent-default>
                    {{ entry.title }}
                </a>
                <a ng-show="entry.available != 1" class="entry-title" href="#" clickjacking-warn>
                    {{ entry.title }}
                </a>
                <div class="timeline-entry-interaction">
                    <a href="/entry/{{entry.id}}">
                        <span calc-from-now ts="{{ entry.created_at }}">{{ calcTime }}</span>
                    </a>
                    <span>&sdot;</span>
                    <a href="#" class="like transition" entry-like>{{ entry.like_msg }}</a>
                    <span>&sdot;</span>
                    <a href="#" class="comment transition" comment-box>Comment</a>
                    <span>&sdot;</span>
                    <a href="#" class="share transition" share-box>Share</a>
                    <span ng-show="entry.like_count > 0">&sdot;</span>
                    <span ng-show="entry.like_count == 1">{{ entry.like_count }} like</span>
                    <span ng-show="entry.like_count > 1">{{ entry.like_count }} likes</span>
                </div>
            </div>
            <div class="share-box">
                <p>Share this entry on a social network:</p>
                <i class="icon-twitter"> Twitter</i>
                <i class="icon-facebook-sign"> Facebook</i>
                <i class="icon-google-plus-sign"> Google+</i>
                <br/><span>Direct Link:</span><br/>
                <input type="text" value="{{ entry.id }}"/>
            </div>
            <div class="clickjacking-warn">
                <span>Unfortunately, viewing in an external site is disabled by publisher.</span>
                <a class="external-link" href="{{ entry.link }}" target="_blank">
                        Open in a new tab.
                </a>
            </div>
            <div class="comments-area">
                <div class="load-more" ng-show="entry.comments.count > 0">
                    <i class="icon-refresh"></i>
                    <a href="#"  class="load-more" load-comments>
                        View {{ entry.comments.count }} more comments
                    </a>
                </div>
                <div class="comments" catch-new-comment id="comments_{{ entry.id }}">
                    <div ng-hide="comment.instantComment" class="comment" ng-repeat="comment in entry.comments.results">
                        <i class="icon-comment" title="{{ created_at }}"></i>
                        <div ng-hide="commentEdit" class="content">
                            <span ng-bind-html="comment.content"></span>
                            <span> - </span>
                            <a ng-show="username != comment.author" href="#">{{ comment.author }}</a>
                            <span ng-show="username == comment.author">
                                <span ng-show="!commentDelSure">
                                    <a href="#">You</a> (<a href="#" c-id="{{ comment.id }}" c-index="{{ $index }}" edit-comment>edit</a> | <a href="#" delete-comment>delete</a>)
                                </span>
                                <span ng-show="commentDelSure">Are you sure? (<a href="#" c-index="{{ $index }}" c-id="{{ comment.id }}" sure-delete-comment>Yes</a> | <a href="#" cancel-delete-comment>No</a>)</span>
                            <span> &sdot; </span>
                            <span class="from-now" calc-from-now ts="{{ comment.created_at }}">{{ calcTime }}</span>
                            <img ng-show="commentLoading" src="/static/img/realtime_spinner.gif"/>
                        </div>
                        <span ng-show="username == comment.author">
                            <form ng-hide="!showCommentEditBox" class="edit-comment-form">
                                <textarea ng-model="commentContent" class='comment textbox-transition' count-char></textarea>
                                <button class="btn btn-small btn-primary" type="button" done-edit-comment c-index="{{ $index }}" c-id="{{ comment.id }}">Done</button>
                                <a href="#" class="cancel" cancel-comment>Cancel</a>
                                <span ng-class="{redfont: restCharCount == 0}" class="pull-right">{{ maxCharCount - commentContent.length }}</span>
                                <img ng-show="postingComment" src="/static/img/realtime_spinner.gif"/>
                            </form>
                        </span>
                    </div>
                </div>
                <form ng-show="showCommentBox" class="comment-form">
                    <textarea ng-model="commentContent" class='comment textbox-transition' count-char></textarea>
                    <button class="btn btn-small btn-primary" type="button" post-comment>Post</button>
                    <a href="#" class="cancel" cancel-comment>Cancel</a>
                    <span ng-class="{redfont: restCharCount == 0}" class="pull-right">{{ maxCharCount - commentContent.length }}</span>
                    <img ng-show="postingComment" src="/static/img/realtime_spinner.gif"/>
                </form>
            </div>
        </div>
    </div>
<div id="timeline-endless-loading">
    <img ng-show="busy" src="/static/img/ajax-loader.gif"/>
    <p ng-show="busy">Please wait...</p>
    <span ng-hide="feed404"><p ng-show="endOfData">~ No more entry ~</p></span>
</div>